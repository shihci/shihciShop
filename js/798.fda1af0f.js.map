{"version":3,"file":"js/798.fda1af0f.js","mappings":"2uBAMgBA,EAAAA,EAAAA,IAAS,CAACC,KAAK,GAAGC,QAAQ,KAAzC,MACMC,GAAGC,EAAAA,EAAAA,MAGJC,GAAML,EAAAA,EAAAA,IAAS,CAACM,KAAK,KAErBC,EAAYC,UACd,MAAMC,GAAIC,EAAAA,EAAAA,KAAMC,EAAAA,EAAAA,IAAWR,EAAI,aACzBS,QAAsBC,EAAAA,EAAAA,IAAQJ,GAEpCG,EAAcE,SAASC,IAIvB,IAAIC,EAASD,EAAIT,OAEjBU,EAASC,GAAGF,EAAIE,GAEhB,IAAIC,EAAW,IACf,GAA2B,GAAxBF,EAASG,OAAOC,OACfF,EAAWF,EAASG,OAAO,GAAGE,UAC7B,CAEL,IAAIC,EAAYC,KAAKC,OAAOR,EAASG,OAAOM,KAAIC,GAAQA,EAAKL,SAGzDM,EAAYJ,KAAKK,OAAOZ,EAASG,OAAOM,KAAIC,GAAQA,EAAKL,SAE7DQ,QAAQC,IAAI,OAAQR,GACpBO,QAAQC,IAAI,OAAQH,GACjBA,IAAYL,EACXN,EAASE,WAAWS,GAEtBT,EAAWS,EAAU,IAAIL,EACzBN,EAASE,WAAWA,EAGtB,CAMAb,EAAMC,KAAKyB,KAAKf,GAChBa,QAAQC,IAAIzB,EAAM,GAEhB,E,OAEN2B,EAAAA,EAAAA,KAAU,KACNzB,GAAW,I,syBClDf,MAAM0B,EAAc,EAEpB,O","sources":["webpack://shihci-shop/./src/views/Products/index.vue","webpack://shihci-shop/./src/views/Products/index.vue?f7d3"],"sourcesContent":["\r\n<script setup>\r\n import {ref,onMounted,reactive } from 'vue';\r\n import {  getAuth, onAuthStateChanged} from \"firebase/auth\";\r\n import { query, getFirestore ,collection,addDoc,doc,getDocs,setDoc,update } from \"firebase/firestore\";\r\nimport { detectOverflow } from '@popperjs/core';\r\n const userData=reactive({user:\"\",userUid:\"\"});\r\n const db=getFirestore();\r\n\r\n\r\nconst data2=reactive({data:[]})\r\n\r\nconst fetchData = async () => {\r\n    const q = query(collection(db, \"products\"));\r\n    const querySnapshot = await getDocs(q);\r\n    //console.log(querySnapshot)\r\n    querySnapshot.forEach((doc) => {\r\n    // doc.data() is never undefined for query doc snapshots\r\n    //console.log(doc.id, \" => \", doc.data());\r\n    //console.log(doc)\r\n    let dataItem=doc.data();\r\n    //將個別id加入到各自的arr中\r\n    dataItem.id=doc.id\r\n    //金額範圍(加入金額範圍，取最大、最小值)\r\n    let priceRange=\"0\"\r\n    if(dataItem.pdSize.length==1){\r\n        priceRange=dataItem.pdSize[0].price;\r\n    }else{\r\n     // 找到最大值\r\n    let maxAmount = Math.max(...dataItem.pdSize.map(item => item.price));\r\n\r\n    // 找到最小值\r\n    let minAmount = Math.min(...dataItem.pdSize.map(item => item.price));\r\n\r\n    console.log(\"最大值:\", maxAmount);\r\n    console.log(\"最小值:\", minAmount);\r\n    if(minAmount===maxAmount){\r\n        dataItem.priceRange=minAmount;\r\n    }else{\r\n      priceRange=minAmount+\"~\"+maxAmount;\r\n      dataItem.priceRange=priceRange;\r\n    }\r\n    \r\n    }\r\n  \r\n    //console.log(doc.id)\r\n    // dataItem.push(doc.id);\r\n    \r\n    //data2.data.push(doc.data())\r\n    data2.data.push(dataItem)\r\n    console.log(data2)\r\n\r\n    });\r\n}\r\nonMounted(()=>{\r\n    fetchData();\r\n\r\n})\r\n\r\n</script>\r\n<template>\r\n  <section class=\"container flex_1\">\r\n        <!-- <div class=\"my-4\">\r\n            <input class=\"keywords\" type=\"text\" placeholder=\"請輸入關鍵字搜尋(品名)\">      \r\n        </div> -->\r\n        <!-- {{ data2 }} -->\r\n        \r\n        <div class=\"my-4 row\">\r\n            \r\n            <div class=\"col-12 col-md-9 row\">\r\n                <h2>商品資訊</h2>\r\n                <router-link v-for=\"item in data2.data\" :key=\"item.id\" :to=\"`/Products/${item.id}`\" class=\"col-12 col-md-6 col-lg-4 col-xxl-3 my-2\">\r\n                    <div class=\"card rounded-xl overflow-hidden\" >\r\n                        <template v-if=\"item.img.length==0\">\r\n                            <img class=\"card-img-top \" src=\"~@/assets/product.png\" alt=\"Card image\">\r\n                        </template>\r\n                        <template v-else >\r\n                            <img class=\"card-img-top\"  :src=\"item.img[0].fullpath\" alt=\"Card image\">\r\n                        </template>\r\n                        \r\n                        <div class=\"card-body\">\r\n                          <h4 class=\"card-title\">\r\n                            <span class=\"titleTags\" v-if=\"item.isPreOrder\">預購</span>\r\n                            <span class=\"titleTags isQty\" v-if=\"item.isqty\">現貨</span>\r\n                            <span class=\"titleTags nonQty\" v-if=\"!item.isqty\">無庫存\r\n                            </span>{{item.name}}</h4>\r\n                          <p class=\"card-text\">{{item.priceRange }}</p>\r\n                        </div>\r\n                    </div>\r\n                </router-link>\r\n            </div>\r\n            <div class=\"col-12 col-md-3\">\r\n                <h3 class=\"title-sort\">商品分類</h3>\r\n                <!-- <ul class=\"list mt-2\">\r\n                    <li>預購品</li>\r\n                    <li>現貨專區</li>\r\n                    <li>流沙擺件</li>\r\n                </ul> -->\r\n            </div>\r\n       \r\n        </div>\r\n\r\n    </section>\r\n</template>\r\n<style lang=\"scss\">\r\n.card{\r\n    @apply md:h-[380px] xl:h-[400px] 2xl:h-[380px]\r\n    \r\n}\r\n.card-img-top{\r\n    aspect-ratio:1 / 1 \r\n}\r\n.titleTags{\r\n    background-color:  #4acfc9;\r\n    font-size:14px;\r\n    color:#fff;\r\n    padding: 0px 6px;\r\n    border-radius: 4px;\r\n    margin-right: 4px;\r\n  }\r\n  .isQty{\r\n    background-color:#e2404d\r\n  }\r\n  .nonQty{\r\n    background-color: #afafaf;\r\n  }\r\n</style>","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=06c3fffd&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["reactive","user","userUid","db","getFirestore","data2","data","fetchData","async","q","query","collection","querySnapshot","getDocs","forEach","doc","dataItem","id","priceRange","pdSize","length","price","maxAmount","Math","max","map","item","minAmount","min","console","log","push","onMounted","__exports__"],"sourceRoot":""}